<html>
    <!-- JOANIS ALLUSHI, IHU SERRES -->
    <head>
    <title>Firestore Testing</title>
    <link rel="stylesheet" type="text/css" href="style.css"/>    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    </head>
    <body>
        <script type="module">
            import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-app.js'
            import {getFirestore, collection, 
                addDoc, getDocs, Timestamp, 
                setDoc, doc, updateDoc, 
                increment, deleteDoc, deleteField,
                query, where, orderBy, limit } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-firestore.js'

            const firebaseConfig = {
            apiKey: "AIzaSyCYMZ2WsipMLoN-DB8VsHn04Ep3gu1vP5Q",
            authDomain: "unitest-98c8b.firebaseapp.com",
            projectId: "unitest-98c8b",
            storageBucket: "unitest-98c8b.appspot.com",
            messagingSenderId: "890715620548",
            appId: "1:890715620548:web:b93047cc2e6ee57c36f591",
            measurementId: "G-GMGTR9D9KS"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore();


            function setFirebaseQueryData () {
                const citiesRef = collection(db, "cities");
                setDoc(doc(citiesRef, "SF"), {
                    name: "San Francisco", state: "CA", country: "USA",
                    capital: false, population: 860000,
                    regions: ["west_coast", "norcal"] });
                setDoc(doc(citiesRef, "LA"), {
                    name: "Los Angeles", state: "CA", country: "USA",
                    capital: false, population: 3900000,
                    regions: ["west_coast", "socal"] });
                setDoc(doc(citiesRef, "DC"), {
                    name: "Washington, D.C.", state: null, country: "USA",
                    capital: true, population: 680000,
                    regions: ["east_coast"] });
                setDoc(doc(citiesRef, "TOK"), {
                    name: "Tokyo", state: null, country: "Japan",
                    capital: true, population: 9000000,
                    regions: ["kanto", "honshu"] });
                setDoc(doc(citiesRef, "BJ"), {
                    name: "Beijing", state: null, country: "China",
                    capital: true, population: 21500000,
                    regions: ["jingjinji", "hebei"] });
            }

            $(document).on('click',".run",function () {
            var element = $(".codeInput").val();
            element = "(async () => {" + element + "})();";
            console.log("hi");
            console.log(element);
            eval(element);
            });
        </script>
        <div class="scriptInput">
            <textarea class="codeInput" placeholder="Type something" id="textbox" rows=50 cols=80></textarea>
            <button class="run" id="run">Run Code</button>
        </div>
    </body>
</html>
